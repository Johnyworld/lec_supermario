# Code Super Mario!

예전에 (2년 전?) 한번 연습했던 Canvas 로 게임 만드는 강의를 한번 더 들어보려 한다.
강의도 한 두개정도 추가 됐길래 그 참에 다시 듣게 되었다.
그때는 webpack도, npm도, ES6+ 도, fetch 도 모르는 상태에서 무작정 따라하기만 했었는데.
지금 보면 얼마나 더 많이 이해할 수 있는지 궁금하기도 하다.

## How to run

### install

```jsx
yarn
or
npm install
```

### run

```jsx
yarn start
or
npm run start
```

# 작업 후기

### Ep1 - Backgrounds & Tiles

기본적인 하늘, 땅의 배경을 깔아주는 코드를 작성했다. 예전에는 1편만 해도 끙끙대면서 계속 막혔던 기억이 나는데, 지금은 Ep1 에 나오는 모든 문법과 스킬을 다 이해하고 있기 때문에 어렵지도 않았고 잠깐 막히는 부분이 있어도 10초 내로 금방 해결 할 수 있었다. 아. 한가지 모르는 문법이 있었다. 그것은 Map() 생성자인데, Mozilla 문서를 찾아보니 꽤 유용하다는 생각이 들었다. 앞으로도 가끔씩 유용하게 사용할 수 있을 것 같았다.

### Ep2 - Sprites & Layers

2편도 큰 어려움 없이 스무스하게 강의를 진행했다. Ep2 에서 새로 배운 문법은 없었지만, 잘 사용하지 않았던 Promise.all 의 사용법이 기억에 남았다. 그리고 파일 하나당 50줄이 넘지 않게 계속 파일 분할하고 정리하는 작업도 인상 깊었다. React 로 프로젝트를 하면서도 컴포넌트를 작고 단단하게 쪼개는게 중요하다고 생각했기 때문에 이런 코딩 스타일들은 너무 좋다. 어쩌면 코드를 작게 쪼개려는 시도도 예전이 이 강의를 봤을 때 부터 조금씩 자리 잡기 시작했을 것이다.

### Ep3 - Timing Accuracy

이번 편에서는 마리오의 움직임과, Timer class 를 추가 했는데, Timer 부분이 상당히 이해가 어려웠다. 곰곰히 생각하면서 코드를 살펴보고 프레임 수치를 바꿔보면서 조금은 이해하게 됐다. 프레임이 낮아지면 게임 자체가 느려지는 문제를 해결하는 과정으로 보인다. 프레임을 낮게 설정한다고 해서 게임 자체가 느려지는 게 아니라 프레임에 상관없이 게임이 진행되되, 렌더링만 천천히 되도록 설정해 주는 것이다. 하지만 현재 코드로는 약간의 문제가 있는 것 같다. 프레임 설정에 따라 게임이 딜레이 걸린다거나 하지는 않는데, 캐릭터가 더 멀리 움직인다거나 하는 문제가 발생한다. 이건 더 살펴봐야 겠다.

### Ep4 - Keyboard Input

이번 편은 2파트로 나눌 수 있다.

1. 키보드 이벤트

게임에 사용될 키를 쉽게 추가할 수 있도록 키보드 이벤트를 클래스로 만들고, Press, Release 의 상태에 따라 달리 이벤트를 부여할 수 있도록 만드는 과정이 인상적이었다.

2. 특성(Trait) 클래스 추가

Entity 클래스로 생성 된 오브젝트에 특성을 추가해 줄 수 있는 기능을 추가했다. Velocity 특성을 나누고, Jump 특성을 추가했다. 여기서 super() 함수가 어떤 역할을 하는지 잘 이해할 수 있었다. React 를 처음 배울때 Class Component 를 사용하면서 super() 함수를 처음 마주했었는데 그 당시에는 그게 뭔지도 모른 채로 다들 쓰라고 하니까 썼었는데 Ep4 를 진행하면서 데이터의 흐름을 보고 어떻게 사용되는건지 이제 알것 같았다.

Modern Pirates 라는 게임을 만들면서는 기본 Class 를 만들고 플레이어, 적 함선, 적 보트 등의 Class 에서 기본 Class 를 Extends 해주는 방식으로만 사용했었는데, 이 방법이 더 직관적이고 재사용성이 높은 것 같다. 좋은 배움이었다.

### Ep5 - Tile Collision

점점 영상이 길어지고 난이도와 복잡도가 올라가고 있다. 하지만 모든 과정을 이해하고 넘어가려고 노력하고 있다. 이번 강의에서는 한마디로 충돌 판정을 구현했다. 2개의 간단한 게임을 만들어 보면서 공부했던 내용이라서 어렵지 않았던 것 같지만 이 분의 코딩 스타일은 다시 봐도 깔끔하고 멋진 것 같다. 이번 강의는 어려운 문법은 없었고 Set() 생성자를 처음 배웠다. 

코드를 정리하는 방법도 여러모로 배우게 되는 것 같아서 좋았던 강의이다.

### Ep6 - Scrolling

맵의 길이를 더 늘리고, 맵 횡스크롤을 구현했다. 카메라(현재 보고있는 위치)에 따라 맵을 새로 그려주는 방식을 구현했는데, 생각보다 이해하기가 쉽지 않았다. 카메라 위치에 따라 지도와 캐릭터등 요소들을 바꿔주고, 가로 256 픽셀 안에서 화면 밖으로 사라지는 것들은 그리지 않고, 화면 안으로 새로 들어오는 타일들은 새로 그려주는 기능을 구현했다.

코드를 따라서 완성하긴 했지만 완전히 이해할 수가 없어서 console.log 를 자세하게 봐 가며, 구동하는 원리를 이해하려고 노력했고 마침내 깨닫고 넘어갈 수 있었다. 추후에 내가 원하는 게임을 (취미로) 만들어 보기 위해서는 꼭 모든 과정을 이해하고 넘어갈 필요가 있었다. 재밌다.

### Ep7 - Animation

재미 있는 애니메이션 파트다. (머리 아프다...) 전에 내가 만들었던 게임에서도 이 동영상에서 봤던 방법을 사용했던 기억이 난다. 캐릭터가 움직이고 있는 방향과, 거리에 따라 애니메이션을 부여하는 모듈을 제작했다. 모든게 모듈화 되어서 유기적으로 작동했다.

타일 애니메이션도 적용했다. Level 에서의 지난 시간을 기준으로 애니메이션을 작동시키는 방법이다.
